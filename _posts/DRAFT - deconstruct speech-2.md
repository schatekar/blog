## Last Mile Security

As API developers we often tend to focus more on building what we think are the most secure APIs. We give little to no recognition of the fact that we have very little control over how the consumers of the API are going to treat the API keys, secrets and tokens that our APIs issue. 

In this talk, I will go over the story of an API developer. Let's call him Joe. Joe has developed a public API for the first time. Having built internal APIs in past, Joe's first choice to secure the new APIs is to use API keys. But Joe soon realises that he has little control over how the consumers of the API are handling this key. If the key gets stolen then it would probably be a long time before Joe can even know. Joe does some digging and figures out that APIs can be better secured using a token-based system like OAuth 2.0 or OpenId Connect. Joe still cannot control how the tokens get handled but Joe is able to control the damage by limiting the time that tokens are valid for. It just so happens, Joe now has an API consumer in the form of a mobile app and there is a need for the tokens to last long, like for a month. Joe is back to square one. It would be a month before Joe can find out if the token is being misused.

Besides asking the front-end developers to follow the best security practices in protecting these tokens, there are a few things Joe can do. For browser-based clients, Joe can accept only the requests where token is present in both a cookie and the header of the request. This will protect the API in case of there being an XSS/CSRF vulnerability in the client application. For the smartphone clients, John can setup a cryptographic challenge .. 